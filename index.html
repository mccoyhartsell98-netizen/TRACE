let inventory = [];
let deletedItems = loadDeleted();

let selectedLane = "Lane 1";
let selectedMachine = MACHINES[0];
let selectedId = null;

let role = "forklift";
let adminUnlocked = false;

let moveTargetId = null;

(async () => {
  try{
    inventory = await loadInventory();
    els.itemsPill.textContent = `ITEMS: ${inventory.length}`;

    // build buttons first
    buildLaneButtons();
    buildMachineButtons();

    // set titles + lists
    els.laneTitle.textContent = selectedLane;
    els.machineTitle.textContent = `Machine: ${selectedMachine}`;

    renderLaneList();
    renderMachineList();
    renderGlobalSearch();

    setRole("forklift");
  }catch(err){
    console.error("Init failed:", err);
  }
})();
